<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>rps</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=1024px">

        <style>

       




            body{
                height: 100vh;
                min-width: 1024px;

            }

            .counter{
               
                background: url(sayac.png) 0px;
                height: 150px;
                width: 150px;
            }

            .sprite,
            .sprite1,
            .sprite2,
            .sprite3{
                background-color: white !important;
                height: 300px;
                width: 300px;
                margin :3rem;
                display: flex;
                align-items: flex-end;
                justify-content: center;
            }

            .sprite1{
                background: url(css_sprites.png) -3000px no-repeat !important;
            }
            .sprite2{
                background: url(css_sprites.png) -6300px no-repeat !important;
            }
            .sprite3{
                background: url(css_sprites.png) -9000px no-repeat !important;
            }



       


            .container{
                display: flex;
                text-align: center;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                
            }

            .gray{
                transition: all 1s ease;
                filter: gray; /* IE6-9 */
                -webkit-filter: grayscale(1); /* Google Chrome, Safari 6+ & Opera 15+ */
                filter: grayscale(1); /* Microsoft Edge and Firefox 35+ */
            }

            .selected{
                transition: all 1s ease;
                scale: 1.2;
            }
            .mobile{
                display: none;
                font-size: 5rem;
            }

            .box{
                height: 300px;
                width:  300px;

            }

            .choose{
                color: goldenrod;
               font-weight: bolder;
               font-size: 30px;
                 -webkit-user-select: none; /* Safari */        
                -moz-user-select: none; /* Firefox */
                -ms-user-select: none; /* IE10+/Edge */
                user-select: none; /* Standard */

            }
            @media (orientation : portrait){
                
                .container{
                    display: none;
                }
                .mobile{
                    display: block;
                
                }   
                
                

            }
            
            /*{border:2px solid red;}*/

        </style>

    </head>



    <body>
        <div class="mobile">Oppss! It seems like you are trying to display this page on portrait mode. You must be on landscape mode to enter this project.  </div>
       
        <div style="display:flex; justify-content:center; gap:100px">
        <div >
            <div class="counter" ></div>
            
            <div style="font-size: 32px; text-align: center;">You</div> 
        </div>
        <div data-type="0" class="box"></div>
        <div >
            <div  class="counter" ></div>
            
            <div style="font-size: 32px; text-align: center;">Computer</div> 
        </div>

        </div> 
        
        <div class="container">

            <div data-type="0" class="sprite"><div class="choose"><div>^</div><div>choose</div></div></div> 
            <div data-type="11" class="sprite"><div class="choose"><div>^</div><div>choose</div></div></div> 
            <div data-type="22" class="sprite"><div class="choose"><div>^</div><div>choose</div></div></div> 
        </div>

        <div style="text-align: center;"><button onclick="touchscreen = true; touch();">touch screen mode</button></div>
        <div style="text-align: center ; color :rgba(49, 50, 52, 0.437); font-size: 3rem;">All graphics are rendered in Blender3d</div>
        
        <button onclick="playCounter(0);  finger++;">counter</button>
        <button onclick="newRound()">new</button>

        





        <script>
            let selected = false
            let touchscreen = false;

            sprite = document.querySelectorAll(".sprite");  
            sprites = Array.from(sprite);

            let finger = 0;
        
        const playCounter = async() => {
       let i;
       let j;
       
       if(finger > 4) finger =0;
        switch (finger)
            {
                case 0:
                    i = 0;
                    j = 40;
                     break;
                case 1:
                    i = 40;
                    j = 60;
                     break;
                case 2:
                    i = 60;
                    j = 73;
                     break;
                case 3:
                    i = 73;
                    j = 80;
                     break;
                case 4:
                    i = 80;
                    j = 90;
                     break;
            }     

        for(; i < j ; i++){
            
        await new Promise(r => setTimeout(r, 35));
       
         document.querySelector(".counter").style = `background : url(sayac.png) ${(i*-150)}px !important;`
           
        }
        }

            function newRound(){

                sprites.forEach( sp => {
                sp.addEventListener("mouseenter" , e => {playAnim(e)} , {once: true});
                sp.addEventListener("click", e => fselected(e.target))
            })

            Array.from(document.querySelectorAll("[data-type]")).forEach( a => { 
                a.style.background =`url(css_sprites.png) ${a.dataset.type *-300}px`; a.classList.remove("selected" , "gray");} 
                );
                
                selected = false;
            }
            

            newRound();
           

      

            const playAnim = async(e) => {
        
            if(!selected && !touchscreen){

            for(let i = 0 ; i < 11 ; i++ ){
                
            await new Promise(r => setTimeout(r, 35));
            if(!selected){
             e.target.style.background = `url(css_sprites.png) ${(e.target.dataset.type * 300) + (-300 *i)}px`
                }
            }
          }

        }

       



            function fselected(e){

                if(!selected){
                
                    e.classList.add("selected");

                    sprites.forEach( sp => {
                    if(sp.dataset.type != e.dataset.type){
                       

                        sp.classList.add("gray");
                    }    
                    })
                    playResult();
                    selected = true;
                }

                
                
 }

            const playResult = async() =>{
               
                let b = [11,0,22,22,11,0];
                
                for(let i = 0 ; i < 20 ; i++){
                    let a = Math.floor(Math.random()*3);
                    let c = Math.floor(Math.random()*3);
                    let foo = b[a];
                    b[a] = b[c]
                    b[c] = foo;
                        
                } 

                let a = b[0];
    

            for(let i = 0 ; i < 11 ; i++ ){
                

                await new Promise(r => setTimeout(r, 35));
                    document.querySelector(".box").style.background = `url(css_sprites.png) ${(a * 300) + (-300 *i)}px`
                }

            }

            function touch(){

                document.querySelector("[data-type ='0']").classList.replace('sprite','sprite1');
                document.querySelector("[data-type ='11']").classList.replace('sprite','sprite2');
                document.querySelector("[data-type ='22']").classList.replace('sprite','sprite3');

            }
       
        </script>
    </body>
</html>